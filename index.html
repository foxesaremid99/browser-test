<html>
  <header>
    <title>Learning ig</title>
  </header>

  <body>

    <div id="in"></div>
    <input id="input" placeholder="Search Bing or enter URL" type="text" style="width: 500px;  border-radius: 25px; border: 2px solid rgb(222, 11, 43); outline: none;">
    <button id="say" style="width: 100px;  border-radius: 25px; border: 2px solid rgb(222, 11, 43);">Open in tab</button>
    <button id="ab" style="width: 100px;  border-radius: 25px; border: 2px solid rgb(222, 11, 43);">AB cloak</button>
    <button id="direct" style="width: 100px;  border-radius: 25px; border: 2px solid rgb(222, 11, 43);">Direct Open</button>
    <button onclick="js()" style="width: 250px;  border-radius: 25px; border: 2px solid rgb(222, 11, 43);">Open JS Console</button>
    

    <p> </p>

    <iframe id="result" onload="checksrc()" style="width: 1000px; height: 750px; resize: both; overflow: auto; border: 2px solid rgb(222, 11, 43);"></iframe>



    <script>
      function changetext() {

        document.getElementById('input').value = document.getElementById('result').contentWindow.location.href;

      };

      function isValidUrl(_string) {
        const matchPattern = /^(?:\w+:)?\/\/([^\s\.]+\.\S{2}|localhost[\:?\d]*)\S*$/;
        return matchPattern.test(_string);
      }

      function checksrc() {
        // try {
          // get the location of the iframe's contentWindow
        //  var curSrc = this.contentWindow.location.href;
          // do something with curSrc
          // alert(curSrc);
        // } catch (e) {
          changetext();
        // }
      };


      function check() {

        var link = document.getElementById('input').value;
        var word = "";

        if (link.includes('https://') || link.includes("http://")) {
          word = link;
        } else {
          word = "https://" + link;
        }
        isValidUrl(word) ? word = word : word = "https://www.bing.com/search?q=" + link

        document.getElementById('result').src = word;
        changetext();


      };

      function ab() {

        var link = document.getElementById('input').value;
        var word = "";

        if (link.includes('https://') || link.includes("http://")) {
          word = link;
        } else {
          word = "https://" + link;
        }
        isValidUrl(word) ? word = word : word = "https://www.bing.com/search?q=" + link

        var win = window.open()
        var url = word
        var iframe = win.document.createElement('iframe')
        iframe.style.width = "100%";
        iframe.style.height = "100%";
        iframe.style.border = "none";
        iframe.src = url
        win.document.body.appendChild(iframe)


      };

      function ac() {

        var link = document.getElementById('input').value;
        var word = "";

        if (link.includes('https://') || link.includes("http://")) {
          word = link;
        } else {
          word = "https://" + link;
        }
        isValidUrl(word) ? word = word : word = "https://www.bing.com/search?q=" + link

        window.open("https://foxesaremid99.github.io/browser-test/", "_blank");


      };

      function js() {

javascript: (function() {    
    javascript: (function() {
        function grouped(e, n) {
            if (e != null) {
                return e[n].toString();
            } else {
                return '';
            }
        }

        function dragElement(elmnt) {
            var pos1 = 0,
                pos2 = 0,
                pos3 = 0,
                pos4 = 0;
            if (document.getElementById(elmnt.id + "header")) {
                document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
            } else {
                elmnt.onmousedown = dragMouseDown;
            }

            function dragMouseDown(e) {
                e = e || window.event;
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e = e || window.event;
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
                elmnt.style.opacity = "0.85";
                elmnt.style.background = "DarkSlateGrey";
                elmnt.style.transition = "opacity 1300ms"
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
                elmnt.style.opacity = "1";
                elmnt.style.background = "DarkSlateGrey";
            }
        }

        function close() {
            document.body.removeChild(document.getElementById("pop_container"));
        }
        var cDiv = document.createElement("div");
        cDiv.setAttribute("id", "pop_container");
        document.body.appendChild(cDiv);
        cDiv.style.display = "inline-block";
        cDiv.style.position = "fixed";
        cDiv.style.top = "300px";
        cDiv.style.left = "75%";
        cDiv.style.width = "35%";
        cDiv.style.height = "43%";
        cDiv.style.border = "1px solid DarkSlateGrey ";
        cDiv.style.background = "DarkSlateGrey";
        cDiv.style.borderRadius = "1em";
        cDiv.style.padding = "3px";
        cDiv.style.zIndex = "10000";
        cDiv.style.fontFamily = '"Courier New", monospace';
        var clsBtn = document.createElement("button");
        document.getElementById("pop_container").appendChild(clsBtn);
        clsBtn.setAttribute("id", "btn_close");
        document.getElementById("btn_close").innerText = "+";
        clsBtn.style.position = "absolute";
        clsBtn.style.background = "transparent";
        clsBtn.style.height = "0px";
        clsBtn.style.width = "0px";
        clsBtn.style.display = "inline-block";
        clsBtn.style.transform = "scale(2.5, 2.5) translate(5px, -5px) rotate(45deg)";
        clsBtn.style.borderRadius = "1em";
        clsBtn.style.padding = "0px";
        clsBtn.style.boxShadow = "0px";
        clsBtn.style.border = "0px";
        clsBtn.style.cursor = "pointer";
        clsBtn.style.userSelect = "none";
        clsBtn.style.fontFamily = '"Courier New", monospace';
        clsBtn.style.fontWeight = "bold";
        clsBtn.style.color = "white";
        var textbox_1 = document.createElement("TEXTAREA");
        textbox_1.setAttribute("id", "textbox_code");
        document.getElementById("pop_container").appendChild(textbox_1);
        textbox_1.style.width = "99%";
        textbox_1.style.height = "40%";
        textbox_1.style.padding = "6px";
        textbox_1.style.border = "1px solid DarkSlateGrey";
        textbox_1.style.background = "FloralWhite";
        textbox_1.style.borderRadius = "1em";
        textbox_1.style.display = "block";
        textbox_1.style.fontSize = "1.2em";
        textbox_1.style.userSelect = "none";
        textbox_1.style.transform = "translate(0px, 5%)";
        textbox_1.style.fontFamily = '"Courier New", monospace';
        var evalBtn = document.createElement("button");
        document.getElementById("pop_container").appendChild(evalBtn);
        evalBtn.setAttribute("id", "btn_box");
        document.getElementById("btn_box").innerText = "Execute";
        evalBtn.style.background = "DarkCyan";
        evalBtn.style.border = "1px solid DarkSlateGrey";
        evalBtn.style.width = "100%";
        evalBtn.style.height = "33px";
        evalBtn.style.borderRadius = "1em";
        evalBtn.style.cursor = "pointer";
        evalBtn.style.color = "white";
        evalBtn.style.transform = "translate(0px, 55%)";
      	var alr = document.createElement("button");
        document.getElementById("pop_container").appendChild(alr);
        alr.setAttribute("id", "btn_alr");
        document.getElementById("btn_alr").innerText = "Alert";
        alr.style.background = "DarkCyan";
        alr.style.border = "1px solid DarkSlateGrey";
        alr.style.width = "100%";
        alr.style.height = "33px";
        alr.style.borderRadius = "1em";
        alr.style.cursor = "pointer";
        alr.style.color = "white";
        alr.style.transform = "translate(0px, 55%)";
      	var re = document.createElement("button");
        document.getElementById("pop_container").appendChild(re);
        re.setAttribute("id", "btn_re");
        document.getElementById("btn_re").innerText = "Reader";
        re.style.background = "DarkCyan";
        re.style.border = "1px solid DarkSlateGrey";
       	re.style.width = "100%";
        re.style.height = "33px";
        re.style.borderRadius = "1em";
        re.style.cursor = "pointer";
        re.style.color = "white";
        re.style.transform = "translate(0px, 55%)";
     	var ttl = document.createElement("button");
        document.getElementById("pop_container").appendChild(ttl);
        ttl.setAttribute("id", "btn_ttl");
        document.getElementById("btn_ttl").innerText = "Change Title";
        ttl.style.background = "DarkCyan";
        ttl.style.border = "1px solid DarkSlateGrey";
       	ttl.style.width = "100%";
        ttl.style.height = "33px";
        ttl.style.borderRadius = "1em";
        ttl.style.cursor = "pointer";
        ttl.style.color = "white";
        ttl.style.transform = "translate(0px, 55%)";
        dragElement(document.getElementById(("pop_container")));
        document.getElementById("btn_box").addEventListener("click", execute);
      	document.getElementById("btn_re").addEventListener("click", reader);
      	document.getElementById("btn_ttl").addEventListener("click", titlechange);
      	document.getElementById("btn_alr").addEventListener("click", alerter);
        document.getElementById("btn_close").addEventListener("click", close);
        textbox_1.addEventListener('keyup', tabIs);

        function tabIs() {
            if (/\{\}/.exec(this.value) == "{}") {
                this.value = this.value.replace(/\{\}/, "{\n \n}");
                this.selectionStart = this.selectionStart - 2;
                this.selectionEnd = this.selectionEnd - 2;
                this.focus();
            }
        }

        function execute() {
            var code = document.getElementById("textbox_code").value;
            eval(code);
        }
      	function reader() {
        	speechSynthesis.speak(new SpeechSynthesisUtterance('Type Below'));
    		var read = prompt('Type Below');
    		speechSynthesis.speak(new SpeechSynthesisUtterance(read))
        }
      	function titlechange() {
        	var newTitle = prompt("What Would You Like Me To Change The Title To?");
    		document.title = newTitle
        }
      	function alerter() {
        	var wwylmta = prompt("What Would You Like Me To Alert?");
    		alert(wwylmta)
        }
    })()
})();

};

      function dir() {

        var link = document.getElementById('input').value;
        var word = "";

        if (link.includes('https://') || link.includes("http://")) {
          word = link;
        } else {
          word = "https://" + link;
        }
        isValidUrl(word) ? word = word : word = "https://www.bing.com/search?q=" + link

        window.open(word, "_blank");


      };


      input.addEventListener("keyup", function(event) {
        if (event.keyCode === 13) {
          event.preventDefault();
          document.getElementById("say").click();
        }
      });
      document.getElementById('say').addEventListener('click', check);
      document.getElementById('ab').addEventListener('click', ab);
      document.getElementById('direct').addEventListener('click', dir);
      document.getElementById('abclockthistab').addEventListener('click', ac);
//      document.getElementById('js').addEventListener('click', js);

    </script>
    <p>some links</p>
    <p> https://bing.com </p>
    <p> https://www.mathsisfun.com/games/2048.html </p>
    <button id="abclockthistab" style="width: 200px;  border-radius: 25px; border: 2px solid rgb(222, 11, 43);">Cloak this page in about:blank</button>
  </body>

</html>
